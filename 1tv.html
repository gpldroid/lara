<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>لايف تي في | بث مباشر لجميع قنوات العالم مجاناً</title>
    <meta name="description" content="شاهد البث المباشر لأكثر من 5000 قناة تلفزيونية من جميع أنحاء العالم. قنوات عربية، هندية، وأوروبية بجودة عالية مجاناً عبر الإنترنت.">
    <meta name="keywords" content="بث مباشر, تلفزيون اونلاين, IPTV مجاني, قنوات عربية مباشر, مشاهدة قنوات عالمية, LARACHE Live TV Online, Free IPTV">
    <meta name="robots" content="index, follow">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>

    <style>
        :root {
            --bg: #f0f2f5;
            --surface: #ffffff;
            --header-bg: #ffffff;
            --text-main: #1c1e21;
            --text-sub: #65676b;
            --accent: #1877f2;
            --card-hover: #e4e6eb;
            --shadow: 0 2px 4px rgba(0,0,0,0.1);
            --success: #42b72a;
            --warning: #f39c12;
            --error: #e74c3c;
        }

        [data-theme="dark"] {
            --bg: #0a0a0a;
            --surface: #18191a;
            --header-bg: #242526;
            --text-main: #e4e6eb;
            --text-sub: #b0b3b8;
            --accent: #2d88ff;
            --card-hover: #3a3b3c;
            --shadow: 0 4px 12px rgba(0,0,0,0.5);
            --success: #2ecc71;
            --warning: #f1c40f;
            --error: #e74c3c;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: var(--bg);
            color: var(--text-main);
            font-family: 'Segoe UI', 'Tahoma', 'Geneva', 'Verdana', sans-serif;
            margin: 0;
            transition: all 0.3s ease;
            min-height: 100vh;
        }

        /* --- Header --- */
        header {
            background: var(--header-bg);
            padding: 15px 5%;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 1000;
            flex-wrap: wrap;
            gap: 15px;
        }

        .logo {
            font-size: 24px;
            font-weight: bold;
            color: var(--accent);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .controls {
            display: flex;
            align-items: center;
            gap: 10px;
            flex-wrap: wrap;
        }

        /* --- Dropdowns --- */
        .dropdown {
            position: relative;
            display: flex;
        }

        .dropbtn {
            background: var(--accent);
            color: white;
            padding: 8px 15px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 13px;
            display: inline-block;
            align-items: center;
            gap: 6px;
            transition: all 0.3s ease;
        }

        .dropbtn:hover {
            background: var(--text-main);
        }

        .dropdown-content {
            display: none;
            position: absolute;
            background: var(--surface);
            min-width: 220px;
            max-height: 400px;
            overflow: scroll;
            box-shadow: var(--shadow);
            z-index: 100;
            right: 0;
            border-radius: 12px;
            margin-top: 10px;
            border: 1px solid var(--card-hover);
        }

        .dropdown:hover .dropdown-content {
            display: flex;
        }

        .list-container {
            max-height: 350px;
            overflow-y: auto;
            padding: 8px;
        }

        .list-container a {
            color: var(--text-main);
            padding: 10px;
            text-decoration: none;
            display: block;
            border-radius: 6px;
            font-size: 13px;
            transition: all 0.2s;
        }

        .list-container a:hover {
            background: var(--card-hover);
            color: var(--accent);
        }

        /* --- Main Player --- */
        main {
            padding: 20px 5%;
            max-width: 1400px;
            margin: 0 auto;
        }

        .player-container {
            background: #000;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: var(--shadow);
            max-width: 900px;
            margin: 0 auto 30px;
        }

        #videoPlayer {
            width: 100%;
            aspect-ratio: 16/9;
        }

        /* --- Grid --- */
        .channel-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
        }

        .channel-card {
            background: var(--surface);
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: 0.3s;
            box-shadow: var(--shadow);
            position: relative;
        }

        .channel-card:hover {
            transform: translateY(-5px);
            border: 1px solid var(--accent);
        }

        .channel-card img {
            width: 60px;
            height: 60px;
            object-fit: contain;
            margin-bottom: 10px;
        }

        .channel-card p {
            font-size: 13px;
            font-weight: 600;
        }

        .search-box {
            width: 100%;
            max-width: 400px;
            padding: 10px 20px;
            border-radius: 20px;
            border: 1px solid var(--card-hover);
            background: var(--surface);
            color: var(--text-main);
            margin-bottom: 20px;
        }

        .theme-toggle {
            cursor: pointer;
            padding: 10px;
            background: var(--card-hover);
            border-radius: 50%;
        }

        footer {
            text-align: center;
            padding: 40px;
            color: var(--text-sub);
            border-top: 1px solid var(--card-hover);
        }
    </style>
</head>
<body data-theme="light">

    <header>
        <div class="logo">
            <i class="fas fa-tv"></i>
            <span>LARACHE TV</span>
        </div>
<br><br />        
        <div class="controls">
            <!-- الفئات -->
            <div class="dropdown">
                <button class="dropbtn"><i class="fas fa-list"></i> الفئات</button>
                <div class="dropdown-content">
                    <div class="list-container" id="categoryList"></div>
                </div>
            </div>

            <!-- اللغات -->
            <div class="dropdown">
                <button class="dropbtn"><i class="fas fa-language"></i> اللغات</button>
                <div class="dropdown-content">
                    <div class="list-container" id="languageList"></div>
                </div>
            </div>

            <!-- الدول -->
            <div class="dropdown">
                <button class="dropbtn"><i class="fas fa-globe"></i> الدول</button>
                <div class="dropdown-content">
                    <div class="list-container" id="countryList"></div>
                </div>
            </div>

            <!-- المناطق -->
            <div class="dropdown">
                <button class="dropbtn"><i class="fas fa-map-marked-alt"></i> المناطق</button>
                <div class="dropdown-content">
                    <div class="list-container" id="regionList"></div>
                </div>
            </div>

            <div class="theme-toggle" onclick="toggleTheme()">
                <i id="themeIcon" class="fas fa-moon"></i>
            </div>
        </div>
    </header>

    <main>
        <div class="player-container">
            <video id="videoPlayer" controls autoplay></video>
        </div>

        <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap;">
            <h2 id="currentViewTitle">اختر قائمة قنوات للعرض</h2>
            <input type="text" class="search-box" id="channelSearch" placeholder="ابحث عن قناة في القائمة الحالية...">
        </div>

        <div class="channel-grid" id="channelGrid"></div>
    </main>

    <footer>
        &copy; 2025 LARACHE LiveTV - جميع الحقوق محفوظة
    </footer>

    <script>
        const API_BASE = "https://iptv-org.github.io/iptv";
        
        // البيانات المستخرجة من المصدر
        const CATEGORIES = ["Animation", "Auto", "Business", "Classic", "Comedy", "Cooking", "Culture", "Documentary", "Education", "Entertainment", "Family", "General", "Kids", "Legislative", "Lifestyle", "Movies", "Music", "News", "Outdoor", "Public", "Relax", "Religious", "Science", "Series", "Shop", "Sports", "Travel", "Weather"];
        const LANGUAGES = [
            {n: "العربية", c: "ara"}, {n: "الإنجليزية", c: "eng"}, {n: "الفرنسية", c: "fra"}, 
            {n: "الألمانية", c: "deu"}, {n: "الإسبانية", c: "spa"}, {n: "الإيطالية", c: "ita"},
            {n: "التركية", c: "tur"}, {n: "الهندية", c: "hin"}, {n: "اليابانية", c: "jpn"}
        ];
        const REGIONS = [
            {n: "الوطن العربي", c: "arab"}, {n: "أفريقيا", c: "afr"}, {n: "آسيا", c: "asia"},
            {n: "أوروبا", c: "eur"}, {n: "أمريكا الشمالية", c: "noram"}, {n: "أمريكا اللاتينية", c: "latam"},
            {n: "عالمي", c: "ww"}
        ];
        const COUNTRIES = [
            {n: "المغرب", c: "ma"}, {n: "مصر", c: "eg"}, {n: "السعودية", c: "sa"}, 
            {n: "الإمارات", c: "ae"}, {n: "الأردن", c: "jo"}, {n: "فرنسا", c: "fr"},
            {n: "أمريكا", c: "us"}, {n: "بريطانيا", c: "uk"}, {n: "تركيا", c: "tr"},
            {n: "البرازيل", c: "br"}, {n: "ألمانيا", c: "de"}, {n: "إسبانيا", c: "es"}
        ];

        let currentChannels = [];

        // تهيئة القوائم في الواجهة
        function initMenus() {
            const catDiv = document.getElementById('categoryList');
            catDiv.innerHTML = CATEGORIES.map(c => `<a href="#" onclick="loadPlaylist('${API_BASE}/categories/${c.toLowerCase()}.m3u', '${c}')">${c}</a>`).join('');

            const langDiv = document.getElementById('languageList');
            langDiv.innerHTML = LANGUAGES.map(l => `<a href="#" onclick="loadPlaylist('${API_BASE}/languages/${l.c}.m3u', '${l.n}')">${l.n}</a>`).join('');

            const regDiv = document.getElementById('regionList');
            regDiv.innerHTML = REGIONS.map(r => `<a href="#" onclick="loadPlaylist('${API_BASE}/regions/${r.c}.m3u', '${r.n}')">${r.n}</a>`).join('');

            const countDiv = document.getElementById('countryList');
            countDiv.innerHTML = COUNTRIES.map(c => `<a href="#" onclick="loadPlaylist('${API_BASE}/countries/${c.c}.m3u', '${c.n}')">${c.n}</a>`).join('');
        }

        // تحميل وتحليل ملف M3U
        async function loadPlaylist(url, title) {
            document.getElementById('currentViewTitle').innerText = "جاري تحميل: " + title;
            document.getElementById('channelGrid').innerHTML = "<p>جاري تحميل القنوات...</p>";
            
            try {
                const response = await fetch(url);
                const data = await response.text();
                currentChannels = parseM3U(data);
                renderChannels(currentChannels);
                document.getElementById('currentViewTitle').innerText = title + ` (${currentChannels.length} قناة)`;
            } catch (e) {
                alert("فشل تحميل القائمة");
            }
        }

        function parseM3U(text) {
            const channels = [];
            const lines = text.split('\n');
            let current = null;

            lines.forEach(line => {
                line = line.trim();
                if (line.startsWith('#EXTINF:')) {
                    const name = line.split(',').pop();
                    const logoMatch = line.match(/tvg-logo="([^"]+)"/);
                    current = { name, logo: logoMatch ? logoMatch[1] : '' };
                } else if (line.startsWith('http')) {
                    if (current) {
                        current.url = line;
                        channels.push(current);
                        current = null;
                    }
                }
            });
            return channels;
        }

        function renderChannels(channels) {
            const grid = document.getElementById('channelGrid');
            grid.innerHTML = channels.map(ch => `
                <div class="channel-card" onclick="playStream('${ch.url}')">
                    <img src="${ch.logo || 'https://via.placeholder.com/60?text=TV'}" onerror="this.src='https://via.placeholder.com/60?text=TV'">
                    <p>${ch.name}</p>
                </div>
            `).join('');
        }

        function playStream(url) {
            const video = document.getElementById('videoPlayer');
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(video);
                hls.on(Hls.Events.MANIFEST_PARSED, () => video.play());
            } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
                video.src = url;
                video.play();
            }
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function toggleTheme() {
            const body = document.body;
            const isDark = body.getAttribute('data-theme') === 'dark';
            body.setAttribute('data-theme', isDark ? 'light' : 'dark');
            document.getElementById('themeIcon').className = isDark ? 'fas fa-moon' : 'fas fa-sun';
        }

        document.getElementById('channelSearch').addEventListener('input', (e) => {
            const term = e.target.value.toLowerCase();
            const filtered = currentChannels.filter(c => c.name.toLowerCase().includes(term));
            renderChannels(filtered);
        });

        initMenus();
        // تحميل القنوات العربية افتراضياً
        loadPlaylist(`${API_BASE}/languages/ara.m3u`, 'القنوات العربية');
    </script>
</body>
</html>
